{% extends "layout.html" %}
{% load static %}
{% block meta_title %}Patches{% endblock meta_title %}
{% block meta_description %}The latest patches to {{ WEBSITE_TITLE }}{% endblock meta_description %}
{% block meta_url %}{% url 'patches' %}#patches{% endblock meta_url %}
{% block title %}Patches{% endblock title %}
{% block breadcrumbs %}
    <li class="bi bi-bandaid breadcrumb-item h2{% if page_obj.number and page_obj.number == 1 %} active" aria-current="page{% endif %}" title="Patches">
        <a href="{% url 'patches' %}#patches" id="patches">Patches</a>
    </li>
    {% if page_obj.number and page_obj.number != 1 %}
    <li class="breadcrumb-item active h2" aria-current="page" title="Patches">
        <a href="{% url 'patches' %}?page={{ page_obj.number }}#patches" id="page">
            Page {{ page_obj.number }}
        </a>
    </li>
    {% endif %}
{% endblock breadcrumbs %}
{% block scripts %}let focusTo = 'patches'{% endblock scripts %}
{% block content %}
<div class="p-3">
    <div class="alert alert-dark alert-dismissible fade show" role="alert" id="patch-alert">
        <p class="lead">
            {{ WEBSITE_TITLE }} is under regular development,
            and constantly being improved!
        </p>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
</div>
    {% if patches %}
        {% for patch in patches %}
<details {% if forloop.first %} open{% endif %}>
    <summary id="{{ patch.patch_name | slugify }}" class="h3 text-ishar" title="{{ patch.patch_name }}">
        <a class="anchor-link" href="#{{ patch.patch_name | slugify }}" aria-label="Link to this section: Patch {{ patch.patch_name }} ({{ patch.patch_name | slugify }})">
            &#x23;
        </a>
        {{ patch.patch_name }}
    </summary>
    <blockquote class="blockquote">
        <p>
            <a href="{{ patch.patch_file.url }}" target="_blank" title="{{ patch.patch_file.name }} &lt;https://{{ request.META.HTTP_HOST }}{{ patch.patch_file.url }}&gt;">
                {{ patch.patch_file.name }}
            </a>
            <small>
                <code title="{{ patch.patch_file.size | filesizeformat }}">
                    {{ patch.patch_file.size | filesizeformat }}
                </code>
            </small>
        </p>
        <footer class="blockquote-footer" title="-- {{ patch.account.get_username | title }} @ {{ patch.patch_date | date:"l, F jS, Y" }}">
            <cite>{{ patch.account.get_username | title }}</cite> @ {{ patch.patch_date | date:"l, F jS, Y" }}
        </footer>
    </blockquote>
</details>
        {% endfor %}
        {% if page_obj %}
<div class="p-3">
    <div class="border-0 card bg-black">
        <div class="card-body">
            <nav aria-label="Patches pages navigation">
                <ul class="pagination m-0">

            {% if page_obj.number != 1 %}
                    <li class="page-item">
                        <a aria-label="First" class="page-link" href="?page=1#patches" >
                            &laquo;
                        </a>
            {% else %}
                    <li class="page-item disabled">
                        <a aria-label="First" aria-hidden="true" class="page-link" href="#patches">
                            &laquo;
                        </a>
            {% endif %}
                    </li>

            {% if page_obj.has_previous %}
                    <li class="page-item">
                        <a aria-label="Previous" class="page-link" href="?page={{ page_obj.previous_page_number }}#patches">
                            &#8249;
                        </a>
            {% else %}
                    <li class="page-item disabled">
                        <a aria-label="Previous" aria-hidden="true" class="page-link" href="#patches">
                            &#8249;
                        </a>
            {% endif %}
                    </li>

            {% for item in page_obj.paginator.page_range %}
                    <li class="page-item{% if page_obj.number == item %} active" aria-current="page{% endif %}">
                        <a aria-label="Page #{{ item }}" class="page-link" href="?page={{ item }}#patches">
                            {{ item }}
                        </a>
                    </li>
            {% endfor %}

            {% if page_obj.has_next %}
                    <li class="page-item">
                        <a aria-label="Next" class="page-link" href="?page={{ page_obj.next_page_number }}#patches">
                            &#8250;
                        </a>
            {% else %}
                    <li class="page-item disabled">
                        <a aria-label="Next" aria-hidden="true" class="page-link" href="#patches">
                            &#8250;
                        </a>
            {% endif %}
                    </li>

            {% if page_obj.number != page_obj.paginator.num_pages %}
                    <li class="page-item">
                        <a aria-label="Last" class="page-link" href="?page={{ page_obj.paginator.num_pages }}#patches">
                            &raquo;
                        </a>
            {% else %}
                    <li class="page-item disabled">
                        <a aria-label="Last" aria-hidden="true" class="page-link" href="#patches">
                            &raquo;
                        </a>
            {% endif %}
                    </li>

                </ul>
            </nav>
        </div>
    </div>
</div>
        {% endif %}
    {% else %}
<p class="lead">
    No patches found.
</p>
    {% endif %}
{% endblock content %}
